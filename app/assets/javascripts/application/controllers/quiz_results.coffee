angular.module('psycho').controller 'QuizResultsCtrl', ($scope, $http, blockUI, ShowError, SweetAlert)->

  $scope.users = []

  $scope.search = { }
  $scope.setUsers = (newUsers)->
    $scope.users = newUsers
    $scope.regions = _.uniq(_.map(newUsers, 'region'))
    $scope.job_titles = _.uniq(_.map(newUsers, 'job_title'))
    $scope.departments = _.uniq(_.map(newUsers, 'department'))
    $scope.job_titles = _.uniq(_.map(newUsers, 'job_title'))

  $scope.requestResult = (user)->
    blockUI.start()
    $http.post('/quiz_requests', {
      user_id: user.id,
    }).then ({ data: { user: newUser }})->
      SweetAlert(
        title: "Запрос Отправлен",
        html: "<a href='http://localhost:3000/quiz_results/new?id=#{user.id}' target='_blank'><strong>Ссылка</strong></a> для прохождения теста"
        type: "success"
      )
      _.assign user, newUser
      blockUI.stop()
    , ShowError

  typeHints = [
    ["I", "Интроверты предпочитают одиночные виды деятельности, думают, прежде чем говорить, чувствуют истощенность после социального взаимодействия."]
    ["E", "Экстраверты предпочитают групповые виды деятельности, думают во время разговора, подзаряжаются с помощью социального взаимодействия."]
    ["N", "Интуитивные личности обладают воображением, полагаются на свою интуицию, погружены в мир идей, концентрируются на том, что могло бы произойти."]
    ["S", "Реалистичные личности твердо стоят на земле, полагаются на органы чувств, заняты практическими вещами, концентрируются на том, что уже произошло."]
    ["T", "Личности, ориентированные на Логику, сильны, следуют голосу своего разума, концентрируются на объективности и рациональности."]
    ["F", "Личности, ориентированные на Принципы, чувствительны, следуют голосу сердца, концентрируются на гармонии и сотрудничестве."]
    ["J", "Планирующие личности решительны, предпочитают ясные правила и инструкции, считают сроки выполнения священными, стремятся к закрытию всех вопросов."]
    ["P", "Ищущие личности очень хорошо импровизируют, предпочитают держать открытыми все варианты, спокойно относятся к работе, ищут свободы."]
  ]


  $scope.openHints = ->
    SweetAlert(
      title: "Типы Личности",
      html: "<ul class='hint-list'>" + typeHints.map(([type, desc]) -> "<li><strong>#{type}</strong>: #{desc}</li>") + "</ul>"
      type: "info"
    )

  explanations = {
    "INTJ": {
      html: "INTJ (архитектор)  Часто найдут способы автоматизировать рутинные и умопомрачительные задачи, и по мере их развития их естественная уверенность, самоотверженность и творческий интеллект откроют двери для повышенной сложности и свободы, которую они жаждут. INTJs предпочитают <span class='ht'>работать в одиночку</span> или, самое большее, в небольших группах, где они могут максимизировать свой <span class='ht'>творческий потенциал</span> и сосредоточиться без повторных перерывов от опроса коллег и совещаний - счастливых руководителей. \n</br>" +
        "Предрасположенности к работе: <span class='red'>инженеров-механиков или инженеров-программистов, юристов или консультантов-фрилансеров</span>, только принимая компетентное руководство, которое помогает в этих целях, и отвергает полномочия тех, кто их удерживает. INTJ имеют исключительно <span class='ht'>инженеров-механиков или инженеров-программистов, юристов или консультантов-фрилансеров</span>, и если они считают коллегу или супервизора некомпетентными или неэффективными, уважение будет утрачено мгновенно и постоянно. INTJs ценят личную инициативу, <div class='ht'>решительность</div>, понимание и преданность делу, и считают, что каждый должен завершить свою работу до максимально возможного уровня. INTJ действительно любят контролировать свои идеи и часто расширяются в низкопрофильные, но влиятельные роли в качестве руководителей проектов, системных инженеров, маркетинговых стратегий, системных аналитиков и военных стратегов. INTJ могут построить нишу практически в любом учреждении, в том числе и в своем собственном, на что они обращают свое внимание. Хотят иметь возможность заниматься интеллектуально интересной работой с минимальным внешним вмешательством, не более, не менее. Архитекторы имеют довольно строгий кодекс поведения, когда дело доходит до их работы, и если они видят, что коллеги оценивают социальную деятельность и «достаточно хорошую» работу над абсолютным совершенством, это будет бурная среда. По этой причине архитекторы, как правило, предпочитают <span class='ht'>работать</span> в жестких, <div class='ht'>единомышленниках - группа</div> из них, если это необходимо. С руководством должным образом либерального менеджера архитекторы утвердятся в должности специалиста, завершая свою работу не с амбициями управленческого продвижения, а своими собственными внутренними достоинствами. Архитекторы требуют и <span class='ht'>ценят твердых, логичных менеджеров</span>, которые могут направить усилия с компетентностью, при необходимости критиковать, а также поддерживать эти решения по разумной причине. Архитекторы - блестящие аналитики, и, скорее всего, соберут небольшую горстку доверенных коллег, чтобы участвовать в их сеансах мозгового штурма, исключая тех, кто слишком зацикливается на деталях или кто в противном случае еще заслуживает уважения. Но, скорее всего, архитекторы просто возьмут на себя инициативу в одиночку."
        tags: ["хороший аналитик", "высокие стандарты", "решительность", "работа в одиночку", "творческий потенциал"]
      }
    "INTP": {
        html: "INTP являются одиночными, эксцентричными и независимыми - ни одна из них не указана как желательная для корпоративных позиций, которые обычно предназначены для самых разных типов личности. INTPs должным образом борются за поиск карьеры, которая отвечает их потребностям, но то, что они приносят, качества с гораздо более высоким спросом - это творчество, страсть к теоретическим методам и идеям, а также предпринимательский, инновационный дух. Если они смогут поставить эту лучшую ногу вперед, чтобы занять позицию в подходящей линии работы, люди с типом личности INTP найдут, что, независимо от того, что говорится в задании, эти «менее желательные» качества станут активом в конце концов. Главным среди интересов INTP является изучение и построение моделей для основополагающих принципов и идей, даже если они доходят до того, что эти концепции по-своему красивы - это делает их естественными математиками, системными аналитиками и учеными-карьеристами. Персонажи INTP управляются самостоятельно и имеют очень высокие персональные стандарты - «достаточно хорошо» никогда не бывает достаточно хорошим, но у него мало экологических потребностей. Несмотря на эту относительную простоту, им часто трудно понять больше людей, ориентированных на людей. Не могут управлять людьми, считая это бременем. судебная экспертиза и лабораторные исследования, очень желательны для INTP. Проницательные и непредвзятые менеджеры, которые могут удовлетворить эти потребности, найдут своих подчиненных INTP неутомимым генератором блестящих и уникальных идей. Работа в качестве бизнес-аналитиков и корпоративных стратегов хорошо подходит для INTP, но они также могут двигаться вперед, поскольку аналитики данных, инженеры-механики, электрики и программного обеспечения, и даже как технические писатели и журналисты, предоставили поле достаточно интересным.  При правильных условиях подчиненные INTP являются новаторскими, находчивыми и трудолюбивыми, легко обходя их умы вокруг любых сложных проблем перед ними и предоставления неортодоксальных, но эффективных решений. Однако эти качества требуют большой свободы, что-то стереотипные менеджеры не хотят уступать. INTPs нуждается в ком-то рядом с тем, чтобы поддерживать порядок и фактически реализовывать свои часто необоснованные идеи. INTP имеют очень толерантный и гибкий стиль, характеризующийся открытостью к логическим предложениям и относительной свободой для подчиненных. Но эта свобода стоит дорого - менеджеры INTP имеют очень высокие стандарты, и они ожидают, что другие смогут мгновенно понять их идеи и обеспечить их в равной мере."
        tags: ["хороший аналитик", "высокие стандарты", "решительность", "работа в одиночку", "творческий потенциал", "трудолюбие"]
      }
    "ENTJ": {
        html: "ENTJ уважаемым лидером организации или команды. как идеальные направления работы - любую позицию, достаточно высокую, чтобы они могли четко видеть горизонт. Структура и порядок являются ключевыми, и если кто-то становится неаккуратным или держит вещи с некомпетентностью, лень или неэффективностью, ENTJ не будет колебаться, чтобы спуститься, тяжело. Это делает ENTJ превосходными корпоративными стратегоми, и их объективность и ясность мысли делают их уважаемыми юристами и судьями. Люди с типом личности ENTJ жаждут лидерства и ответственности, роста и возможностей, и искренне любят управлять другими, чтобы выполнить работу. ENTJ являются провидцами и лидерами, а не хрюками или повседневными администраторами. ENTJs придерживаются очень высоких стандартов, но многое из того, что задает этот тон, является обратной связью с окружающей средой, а именно критикой со стороны их менеджеров. Объективные, рациональные утверждения о том, что делается правильно, и что можно сделать лучше, полезны для ENTJ, и они не так возмущаются критикой, они их ценят. Среди коллег ENTJ являются общительными и очень любят делиться идеями и критиками в своих частых сеансах мозгового штурма. Естественные лидеры, которыми они являются, ENTJs склонны утверждать себя на позициях в качестве представителей и проектов, учитывая их объективность и харизму - идеальные качества для этих ролей.  Менеджеры ENTJ являются уверенными, харизматичными коммуникаторами, и они общаются, но одно видение: максимально эффективно выполнять работу и максимально высокий уровень качества.\n"
        tags: ["лидер", "общительность", "объективность", "харизма", "стратег", "высокие стандарты"]
      }
    "ENTP": {
      html: "ENTP персонажи ENTP сосредоточены на разработке решений для интересных и разнообразных технических и интеллектуальных проблем. ENTP - это универсальный тип личности, и, хотя им может потребоваться время, чтобы добраться до точки, где они могут полностью использовать свой набор навыков и качеств, они, вероятно, найдут, что эти качества хорошо переводятся в любую карьеру, Их интереса.  Пока ENTP честны сами по себе о своих сильных и слабых сторонах, они могут процветать в любой карьере, которая нуждается в новой линии мышления. ENTP имеют дополнительное преимущество быть отличными коммуникаторами в письменном виде, но особенно в личном разговоре.  естественными лидерами, демонстрируя путь вперед и вдохновляя других на разумную логику и интеллектуальную доблесть. Люди с личным типом ENTP ценят знания, рациональное мышление и понимание очень высоко, и они делают блестящих юристов, психологов, системных аналитиков и ученых. Даже ENTP могут процветать в качестве торговых представителей, поскольку они рационализируют решения о покупке. Обычные, структурные и формальные правила все чувствуют себя как ненужные препятствия для ENTP, и они могут обнаружить, что их лучшая карьера еще позволяет им заниматься своими интеллектуальными занятиями на своих условиях, как внештатные консультанты или инженеры-программисты. У ENTP есть исключительные качества - это количественная оценка их достижений и навыков.  ENTP ожидают, что их идеи будут услышаны теми, кто выше них, ожидают надежных дебатов среди своих сверстников и требуют, чтобы те, кому они управляют, предлагали новые решения и идеи независимо от их позиций. Эта динамика ясна с подчиненными ENTP, так как они комфортно оспаривают идеи своих менеджеров и имеют сильную (и хорошо выраженную) неприязнь к ограничительным правилам и рекомендациям. Если что-то можно сделать лучше, это так же просто, и личность ENTP с радостью принимает критику, если она логична и ориентирована на производительность. они не могут стоять, простая, рутинная работа, а монотонные задачи - это вещи кошмаров.  облегчает им общение с людьми, ENTP - это открытые и гибкие менеджеры. люди с таким типом личности твердо придерживаются рациональных дебатов, делая их страшными сторонниками своих команд."
      tags: ["лидер", "рациональное мышление", "коммуникатор", "торговый представитель"]
    }
    "INFJ": {
      html: "INFJ  начинают рано начинать карьеру, потому что они видят десять дико разных путей вперед, каждый со своими собственными наградными наградами, заманчивыми, но также душераздирающими, потому что каждый из них означает отказаться от чего-то еще. Это желание помочь и соединить делает карьеру в здравоохранении, особенно более целостные сорта, очень полезное для INFJs - роли консультантов, психологов, врачей, тренеров по жизни и духовных гидов - все это привлекательные варианты. INFJs также жаждут творчества, способности использовать свое понимание для того, чтобы соединить события и ситуации, внося реальные изменения в жизни других людей. INFJ с большей вероятностью, несмотря на их отвращение к контролю над другими, устанавливают свою независимость либо путем нахождения лидирующей позиции, либо просто начинают свою собственную практику. Будучи независимыми, индивидуальными предпринимателями на языке бизнеса, INFJs могут следовать своим сердцам, применяя свой личный подход, творчество и альтруизм ко всему, что они делают. INFJs часто преследуют экспрессивные карьеры, такие как написание, элегантные коммуникаторы, которыми они являются, и автор многих популярных блогов, рассказов и сценариев. Музыка, фотография, дизайн и искусство также являются жизнеспособными вариантами, и все они могут сосредоточиться на более глубоких тем личного роста, морали и духовности. INFJs имеют довольно высокие требования, когда дело доходит до удовлетворительной рабочей среды. Мало того, что этот тип личности должен быть способен выразить свое творчество и понимание, INFJ должны знать, что то, что они делают, имеет смысл, помогает людям, ведет к личностному росту и, все это время, соответствует их ценностям, принципам и убеждения. INFJs - умная и вдохновленная группа, и с некоторыми из подходящих условий большинство положений можно заставить работать. Люди с типом личности INFJ ценят дипломатию и чувствительность, а более демократичный и личный стиль их менеджера, и чем больше они чувствуют, что их независимость и вклад ценятся, тем счастливее они будут. INFJ действуют по их убеждениям. Как коллеги, INFJ, вероятно, станут довольно популярными, считаясь позитивными, красноречивыми и способными друзьями, определяющими мотивы других людей и обезвреживанием конфликтов и напряженности, прежде чем кто-либо еще почувствует беспорядки. INFJ, скорее всего, будут уделять первоочередное внимание гармонии и сотрудничеству над безжалостной эффективностью, поощряя хорошую, трудолюбивую атмосферу и помогая другим, когда это необходимо. Как менеджеры, INFJ часто неохотно выполняют свои полномочия, предпочитая видеть своих подчиненных равными, координировать и контролировать людей, оставляя технические системы и фактические данные более способным руками и упорно трудиться, чтобы вдохновлять и мотивировать, а не взламывать кнут. Хотя они чувствительны, понимают, принципиальны и справедливы, способны оценить индивидуальные стили и делать точные суждения о мотивах других людей."
      tags: ["творческий потенциал", "альтруизм", "высокие стандарты", "дипломатия"]
    }
    "INFP": {
      html: "INFP  часто хотят, чтобы они могли быть просто, делать то, что они любят, без стресса и строгости профессиональной жизни. Слишком много INFPs отвлекают разочарование, в конечном счете поддаваясь потребностям повседневной жизни в работе, которая не предназначена для них. Но оказывается, что, несмотря на столь требовательные требования, современная экономика ставит премию за самые ключи к задачам INFP: их творчество, независимость и потребность в значимых отношениях с людьми, которые нуждаются в их помощи. Некоторые INFP предпочитают еще более личный контакт, способный работать лицом к лицу с клиентами, видя, что их личное усилие действительно влияет на качество жизни другого. Службы карьеры, такие как массаж, физическая реабилитация, консультирование, социальная работа, психология и даже академические роли и переподготовка, могут быть исключительно полезными для INFPs, которые гордятся тем, что они способствуют успеху и росту. Люди с типом личности ИНФП склонны ставить чужие интересы впереди своих.  Они ценят гармонию, нуждаются в эмоциональной и нравственной связи с их работой и ненавидят бюрократическую скуку. Люди с типом личности INFP не ищут легкую, забываемую работу, которая оплачивает счета, они ищут значимую работу, о которой они на самом деле хотят думать. они прекрасно работают в более человеческих и творческих начинаниях. отвращение к контролю. Среди своих коллег, INFPs будут чувствовать себя свободнее",
      tags: ["творческий потенциал", "альтруизм", "личный контакт"]
    }
    "ENFP": {
      html: "ENFP отличительная черта – истинные качества людей. талантливые, энергичные и перспективные ENFP. И хотя типы мышления могут быть лучше при применении логики к системам и машинам, люди с типом личности ENFP могут применять ту же логику к человеческим взаимодействиям и сетям, используя свое исключительное социальное восприятие, чтобы выяснить, что заставляет людей клевать. Это придает ENFP надежную опору в любой человеческой науке или служении, от психологии, консультирования и обучения политике, дипломатии и детективной работе. Все эти области имеют еще одно важное сходство: они постоянно развиваются, меняются, представляют новые углы и новые подходы. Люди с типом личности ENFP должны чувствовать, что они нажимают границы и исследуют идеи, и должны сосредоточиться на интересах и карьере, которые поощряют это. Этим требованиям удовлетворяются многие другие варианты карьеры, а не только научные - письменность, журналистика, актерская и телевизионная отчетность - все дают ENFP возможность каждый день изучать что-то новое и немного помешать горшку, пока они на нем. Однако может случиться так, что лучший способ продвинуть личность ENFP - это создать себя как предприниматели и консультанты, пытаясь разгадать собственные тропы и взять на себя любой проект, который будет самым увлекательным. До тех пор, пока они получат навыки своих людей, выявляют и достигают своих целей и вдохновляют своих коллег и последователей, ENFP будут счастливы. Есть две основные вещи, которые ENFP больше всего ищут на рабочем месте: возможность исследовать новые идеи и возможность провести это исследование вместе с другими людьми, которые разделяют их волнение. Люди с типом личности ENFP обладают теплом, творчеством и непредвзятостью, что делает их отличными слушателями. В определенной степени, часто требуется некоторое прямое управление, так как ENFPs печально известны тем, что их внимание ускользает от одного проекта к другому. Люди с типом личности ENFP являются теплыми и оптимистичными, всегда ищут и обычно находят беспроигрышные ситуации для всех. ENFP будут склонны верить в концепцию внутренней мотивации, идею о том, что все стоит делать ради них самих, а не из-за некоторой запутанной системы наказаний и наград."
      tags: ["энергичные", "инновация", "творческий потенциал", "хороший слушатель", "хороший аналитик", "дружелюбие"]
    }
    "ISTJ": {
      html: "ISTJ Это имеет смысл, поскольку они не только обеспечивают стабильность, которую стремятся ISTJ, но и соответствуют их принципам и консерватизму, устанавливая четкие социальные роли. Большинство из этих карьеры имеют ISTJ, работающих в одиночку, что обычно является их преимуществом, но когда команды необходимы, они лучше всего определяются четко обозначенными ролями, обязанностями и условиями работы. ISTJ могут также бороться со все более открытыми и социальными потребностями современной трудовой жизни. Будучи несколько плохим в восприятии других чувств, отношение «только факты» от ISTJ может быть совершенно отчуждающим, когда речь заходит о более чувствительных типах личности. Это относится не только к сотрудникам, но и к клиентам: позиции обслуживания, такие как розничные продажи и таблицы ожидания, а также более эмоционально требовательные карьеры, такие как психиатрия, как правило, ужасают (не общительны). Идеальные пути карьеры характеризуются тенденцией: они ставят факты выше чувств и позволяют ISTJ отстаивать жесткие стандарты, которые являются основой общества. Правила являются основой для всего, что люди считают само собой разумеющимся о современной жизни, от социального договора, который сглаживает отношения, с законами, которые защищают самую основную безопасность людей, конституциями и договорами, которые управляют нациями. Люди с типом личности ISTJ берут на себя роли защитников этих идей большими и малыми и по праву гордятся этим. Во всех положениях тип личности ISTJ ищет структуру, четко определенные правила и уважение к авторитету и иерархии. Серьезность подхода ISTJ к их работе делает их удивительно чувствительными к критике, что приводит к иногда досадному уровню негибкости."
      tags: ["консерватизм", "работа в одиночку", "подчиненность правилам", "авторитет", "ответственность", "пунктуальность"]
    }
    "ISFJ": {
      html: "ISFJ Во многих отношениях ISFJ являются основой современной рабочей силы. Альтруистический и хорошо округленный, ни один другой тип личности настолько хорошо подходит для служения другим. ISFJ умеют запоминать вещи о других, что делает их не только ценными помощниками, но и любимыми коллегами. Люди с типом личности ISFJ всегда могут рассчитывать на то, чтобы помнить день рождения, выпускной или просто частые имена клиентов, и это может иметь значение. Добавьте к этим любезным качествам тщательность, упорный труд и преданность ISFJ, и неудивительно, что их карьера часто прогрессирует гладко, с небольшим количеством взлетов и падений, которые сопровождают более высоколетные типы. Тем не менее, ISFJ вряд ли будут активно искать управленческие позиции и, тем не менее, вряд ли хвастаются своими достижениями. Уважая традиции и безопасность, ISFJ не имеют проблем с идеей продвижения в структурированной иерархии, и, хотя они не всегда могут искать эти управленческие позиции, они наполняют их хорошо. ISFJs хорошо настроены на чужие эмоции и обладают сильным чувством практичности, расширяя собственную способность добиваться успеха в своих командах. медсестер, учителей начальной школы и социальных и религиозных работников, помогать сообществу в приютах, банках питания и школах их детей.  Среди их коллег люди с таким типом личности ищут среду без трения, дух друзей, помогающих друзьям выполнять свою работу. Близкие и поддерживающие команды - это то, что больше всего нравится ISFJ, позволяя им выразить свой альтруистический дух среди людей, которые полагаются на свою преданность и теплоту. Это помогает им создавать личные отношения со своими подчиненными, быть друзьями на рабочем месте, которые просто имеют разные наборы обязанностей."
      tags: ["альтруизм", "упорство", "преданность", "самоотверженность"]
    }
    "ESTJ": {
      html: "ESTJ Обеспечивая дальнейшую направленность, ESTJ разделяют глубокое уважение к традициям, стабильности и безопасности, качествам, которые хорошо подходят для продвижения по четким путям к повышению ответственности и надежности. Чувство лояльности ESTJ приводит к тому, что они остаются с одним работодателем как можно дольше, и их почтение к установленным институтам часто приводит к работе с уважаемыми организациями. Тяжелая работа и самомотивация также являются сильными принципами ESTJ, что делает их отличными торговыми представителями. ESTJ любят чувствовать, что они являются частью команды и частью большей организации, в которой они работают. Чтобы это произошло, ESTJ почти всегда готовы принять критику, которая может помочь повысить их эффективность и всегда следить за их окружением, чтобы убедиться, что они и их команда обеспечивают ожидаемые результаты."
      tags: ["консерватизм", "лояльность", "эффективные менеджеры", "торговый представитель", "последовательность", "самоотверженность", "авторитет"]
    }
    "ESFJ": {
      html: "ESTJ  занимают центральное место и ведут свои команды к победе и славе. Позже в жизни ESFJ продолжают пользоваться поддержкой своих друзей и близких, организуя общественные встречи и прилагая все усилия, чтобы все были счастливы. Карьера в качестве администраторов является естественным подходом, позволяя ESFJ организовать не только среду, но и людей в ней. Их практические навыки хорошо сочетаются с их надёжностью, что делает ESFJ персоналий удивительно хорошими бухгалтерами. Чисто аналитические карьеры часто слишком скучны для ESFJ, хотя они нуждаются в человеческом взаимодействии и эмоциональной обратной связи, чтобы быть действительно удовлетворены в своей работе. Хорошие слушатели и восторженные члены команды, люди с типом личности ESFJ - отличные поставщики медицинской помощи и социальной работы. Преподавание - еще один отличный вариант, поскольку ESFJs удобны с полномочиями, но поддерживаются и достаточно дружелюбны, чтобы этот авторитет не чувствовал. Будучи столь же альтруистичными, как и они, ESFJ испытывают трудности с удовлетворением, если они не знают, что они сделали что-то ценное для другого человека. Когда дело доходит до рабочего места, ESFJ имеют четкие тенденции, которые проявляются независимо от их положения. Люди с типом личности ESFJ процветают в социальном порядке и гармонии, а также используют их теплоту и социальную разведку, чтобы каждый человек знал свои обязанности и мог сделать то, что нужно сделать. С четко определенными обязанностями и целеустремленностью ESFJ являются терпеливыми, эффективными, трудолюбивыми людьми, которые уважают авторитет своих менеджеров. Хотя ESFJ могут бороться со слишком большой свободой и импровизацией, они процветают на рабочих местах со структурой, безопасностью и рекомендациями. С другой стороны, ESFJ часто нужно работать в команде - заставляя себя цепляться за бумажные документы в течение нескольких дней подряд, они оставляют их усталыми и невыполненными."
      tags: ["лидер", "организованность", "личный контакт", "альтруизм", "целеустремленность", "трудолюбие", "работа в команде"]
    }
    "ISTP": {
      html: "ISTP разнообразие и непредсказуемость. Эта комбинация любопытства и практической силы делает людей с типом личности ISTP отличными механиками, инженерами, графическими дизайнерами и судебными экспертами. Рабочие места, ориентированные на кризисные реакции, такие как пожарные, фельдшеристы, детективы, летчики и полицейские, похоже, сделаны для ISTP.  Возможно, самое важное для ISTP - это ощущение, что они не застряли. Свобода блуждать, свобода декларировать свои собственные графики, свои обязанности, собственную среду. ISTP обладают естественным навыком устранения неполадок, расслабленной, уверенной в себе природой и ориентированной на результат фокусом. Люди с этим типом личности понимают, что риск равен вознаграждению. Как подчиненные, то, что большинство ISTP жаждут, - это небольшая комната для маневра. Расслабленные и легкомысленные люди с типом личности ISTP счастливы придерживаться удивительной лояльности, пока их работодатели и менеджеры не пытаются заставить их совершить все, что не может быть отменено на следующий день. Их ISTP часто гораздо более любят их коллеги, чем они ожидали. Тихие и сдержанные люди с таким типом личности обычно нуждаются в небольшом физическом пространстве, но в то же время наслаждаются поиском работы других, чтобы узнать, есть ли что-то интересное. Неестественно эмоциональные или эмоциональные, у ISTP есть тупой способ общения, который может привести к недоразумениям или больным чувствам."
      tags: ["целеустремленность", "лояльность", "эмоциональность"]
    }
    "ISFP": {
      html: "ISFP Люди с типом личности ISFP являются страстными экспериментаторами, и знают ли они об этом или нет, они являются известными законодателями моды. Благодаря своей уникальной перспективе и простому желанию быть собой, ISFP являются естественными художниками, музыкантами и фотографами, а также дизайнерами всех полос. ISFP ненавидят сидеть без дела в бесцветных, неизменных средах. Они являются свободными душами и нуждаются в гибкости, возможностях для импровизации и погружении в работу, которая затрагивает все чувства. Для ISFP требуется много энергии, чтобы так долго поддерживать эту цель, но это может сделать изо дня в день гораздо более полезным для остальной части их жизни. На рабочем месте ISFP ищут позиции, которые дают им как можно больше места для маневра, чтобы делать что-то по-своему. Окружающие элементы, которые вращаются вокруг строго соблюдаемых традиций и строго соблюдаемых процедур, вряд ли понравятся персоналам ISFP. Спонтанные, обаятельные и по-настоящему забавные люди должны быть рядом, ISFP просто хотят выразить эти природные качества и знать, что их усилия ценятся. Люди с типом личности ISFP не любят, когда их контролируют, и это может быть довольно ясным в подчиненных позициях - они ненавидят быть микроуправляемыми. ISFP являются толерантными и дружелюбными, и обычно делают то, что нужно делать независимо от того, набирают ли их коллеги собственный вес. В конце концов, однако, ISFP чувствительны и должны знать, что эти усилия приветствуются - хорошо сделанный комплимент проходит долгий путь. Они не являются доминирующим типом личности и не радуются при осуществлении контроля над другими, планированию долгосрочных целей или обучению неудовлетворительному поведению."
      tags: ["творческий потенциал", "энергичность", "консерватизм", "дружелюбие"]
    }
    "ESTP": {
      html: "ESTP люди с типом личности ESTP думают на своих ногах и прекрасно принимают быстрые решения в разгар момента. В то же время они приветливые люди, которые всегда, похоже, подружились и подключались куда угодно. Популярность и прочная сеть могут быть огромными активами в рабочем мире, и ESTPs прибивают ее. продажи, деловые переговоры, маркетинг. Буйный и спонтанный, веселый и, возможно, немного грубый, люди с типом личности ESTP любят решать проблемы по мере их возникновения и рассказывать великие истории о своих решениях впоследствии. ESTP известны своими экспериментами, импровизацией и быстрым мышлением - если им не разрешено использовать эти качества, и им нужно зарегистрироваться с супервизором для каждой мелочи, им будет скучно и расстроено. ESTP очень наблюдательны и хорошо настроены на изменения привычек и настроений своих коллег - если только они сами не являются причиной бедствия."
      tags: ["личный контакт", "приветливость", "быстрое мышление", "наблюдательность"]
    }
    "ESFP": {
      html: "ESFP  В результате практически любая карьера, которая фокусируется на работе с другими людьми, является хорошей подгонкой и даже необходима для того, чтобы ESFP были счастливы и продуктивны. Персонажи ESFP являются естественными конферансье, планировщики событий, торговые представители, планировщики поездок и гиды, так как каждый из них создает ощущение возбуждения, стимуляции и новизны между ними и их клиентами. ESFP действительно любят проводить время с другими и узнавать их и умеют делать людей счастливыми даже в самых неприятных ситуациях. С их способностью реагировать на находчивость и страсть, когда их помощь крайне необходима, ESFP делают блестящих медицинских специалистов, особенно как ЕМТ, фельдшеров и медсестер. Они быстро собирают информацию о других, помогая им понять суть проблемы, когда речь идет о больном или раненых. ESFP процветают от сильных эмоций, и для этого нет лучшего места. Независимо от того, где находятся их разнообразные страсти, ESFP нуждаются в свободе, новизне и, прежде всего, человеческих контактах. Независимо от того, какая позиция ESFP находится на рабочем месте, у них есть желание сделать окружающую среду максимально дружественной и приятной. Люди с типом личности ESFP способны принять социальное и расслабленное отношение и использовать его для того, чтобы все на борту справились с практическими задачами, которые просто нужно сделать. Веселая атмосфера важна, и люди с типом личности ESFP используют свои сильные наблюдательные и социальные навыки, чтобы объединить всех вместе, при необходимости изменив настроение."
      tags: ["общительность", "находчивость", "альтруизм", "личный контакт"]
    }
  }

  $scope.allTags = _.uniq(_.flatten(_.map(explanations, 'tags')))
  $scope.tgs = {
    selectedTags: []
  }

  $scope.explainResult = (result)->
    explanation = explanations[result.personality_type]
    SweetAlert(
      title: result.personality_type,
      html: explanation.html + "<br/><br/><br/> <em>#{explanation.tags.join(', ')}</em> "
      type: "info"
    )

  $scope.tagFilter = (users)->
    return users if $scope.tgs.selectedTags.length == 0
    _.filter users, (u)->
      return false unless u.quiz_result
      explanation = explanations[u.quiz_result.personality_type]
      _.intersection(explanation.tags, $scope.tgs.selectedTags).length > 0